<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/style.css">
    <title>Artikler</title>
</head>
<body>
    {{>_header}}
    {{>_add_btn}}
    <div class="container">
        {{{body}}}
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ckeditor/4.24.0/ckeditor.js" integrity="sha512-Vzo9BnO8qlWYp96AZsG6QtNm+csiTPp3mBn5KtAOUBdj9cqfjRTN7e418F92/pVx9SOOsYwNPV+vhsf+lU5lxg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Initialiser sidenav
    var elemsSidenav = document.querySelectorAll('.sidenav');
    var instancesSidenav = M.Sidenav.init(elemsSidenav, {});

    // Initialiser form select
    var elemsSelect = document.querySelectorAll('select');
    var instancesSelect = M.FormSelect.init(elemsSelect, {});

    // Status checkbox logikk
    const statusCheckbox = document.getElementById('status');
    if (statusCheckbox) {
        statusCheckbox.addEventListener('change', function () {
            if (this.checked) {
                this.value = 'public';
            } else {
                this.value = 'private';
            }
        });
    }

    // Initialiser CKEditor
    if (document.getElementById('content')) {
        CKEDITOR.replace('content', {
            extraPlugins: 'wysiwygarea,toolbar,basicstyles,link',
        });
    }

    // Viser feilmelding basert p√• URL-parametere
    const urlParams = new URLSearchParams(window.location.search);
    const errorMsg = urlParams.get('error_msg');
    if (errorMsg) {
        alert(decodeURIComponent(errorMsg));
    }
      function updateStatus(checkbox) {
            var hiddenStatusField = document.getElementById('hiddenStatus');
            if (checkbox.checked) {
                hiddenStatusField.value = 'public';
            } else {
                hiddenStatusField.value = 'private';
            }
        }
});

    </script>
</body>
</html>
